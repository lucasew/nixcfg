{{- file "mise" "0755" }}
{{ "workspaced" "open" "mise" }}
{{- endfile }}

{{- file "workspaced" "0755" }}
{{ shim (printf "%s/bin/workspaced" (userDataDir)) }}
{{- endfile }}

{{- /* Script x: adds lazy shims to PATH */ -}}
{{- file "x" "0755" }}
#!/usr/bin/env bash
export PATH="{{ userDataDir }}/shim/lazy:$PATH"
exec "$@"
{{- endfile }}

{{- /* Global shims for tools - skip mise and workspaced (handled above) */ -}}
{{- range $name, $tool := .LazyTools }}
    {{- if $tool.Global }}
        {{- $bins := $tool.Bins }}
        {{- if eq (len $bins) 0 }}
            {{- $binName := $tool.Alias }}
            {{- if not $binName }}
                {{- $parts := split $name ":" }}
                {{- $binName = last $parts }}
                {{- $parts = split $binName "/" }}
                {{- $binName = last $parts }}
            {{- end }}
            {{- $bins = list $binName }}
        {{- end }}
        {{- range $bins }}
            {{- file . "0755" }}
                {{ shim "x" . }}
            {{- endfile }}
        {{- end }}
    {{- end }}
{{- end }}
