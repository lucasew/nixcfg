{{- /* Skip if not on Android/Termux */ -}}
{{- if not isPhone }}{{ skip }}{{ end -}}

{{- /* Check if shortcuts directory exists */ -}}
{{- $shortcutsDir := printf "%s/bin/_shortcuts/termux" (dotfiles) -}}

{{- /* Generate a script for each shortcut file */ -}}
{{- range readDir $shortcutsDir }}
{{- file . "0755" }}
#!/data/data/com.termux/files/usr/bin/bash
TERMUX_EXEC_PATH="/data/data/com.termux/files/usr/lib/libtermux-exec.so"
if [ -f "$TERMUX_EXEC_PATH" ] && [[ "$LD_PRELOAD" != *"$TERMUX_EXEC_PATH"* ]]; then
	export LD_PRELOAD="$TERMUX_EXEC_PATH"
	exec "$0" "$@"
fi
export PATH="/data/data/com.termux/files/usr/bin"
. "{{ dotfiles }}/bin/source_me"
sd _shortcuts termux {{ . }} "$@"
{{- endfile }}
{{- end }}
